{"version":3,"file":"tokenExpirationParser.js","sources":["src/lib/tokenExpirationParser.ts"],"sourceRoot":"/","sourcesContent":["export default function parseEnvSeconds(\n  envValue: string | undefined,\n  fallback: number\n): number {\n  if (!envValue) return fallback;\n\n  const trimmed = envValue.trim();\n\n  // plain number\n  const plain = Number(trimmed);\n  if (!Number.isNaN(plain)) return Math.floor(plain);\n\n  // units:  s, m, h, d, w\n  const unitMatch = trimmed.match(/^([0-9]+)\\s*([smhdw])$/i);\n  if (unitMatch) {\n    const [, numStr, unitStr] = unitMatch;\n    const value = Number(numStr);\n    if (unitStr === undefined) return fallback;\n    const unit = unitStr.toLowerCase();\n    switch (unit) {\n      case \"s\":\n        return value;\n      case \"m\":\n        return value * 60;\n      case \"h\":\n        return value * 60 * 60;\n      case \"d\":\n        return value * 24 * 60 * 60;\n      case \"w\":\n        return value * 7 * 24 * 60 * 60;\n    }\n  }\n\n  // allow simple math expressions containing only digits, spaces and +-*/().\n  if (/^[0-9+\\-*/().\\s]+$/.test(trimmed)) {\n    try {\n      // Use Function to evaluate but only after validation above.\n      // eslint-disable-next-line no-new-func\n      const result = Function(`return (${trimmed})`)();\n      if (typeof result === \"number\" && Number.isFinite(result))\n        return Math.floor(result);\n    } catch (e) {\n      // fallthrough to fallback\n    }\n  }\n\n  return fallback;\n}\n"],"names":[],"mappings":";;AAAA,MAAM,CAAC,OAAO,UAAU,eAAe,CACrC,QAA4B,EAC5B,QAAgB;IAEhB,IAAI,CAAC,QAAQ;QAAE,OAAO,QAAQ,CAAC;IAE/B,MAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAC;IAEhC,eAAe;IACf,MAAM,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;IAC9B,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC;QAAE,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IAEnD,wBAAwB;IACxB,MAAM,SAAS,GAAG,OAAO,CAAC,KAAK,CAAC,yBAAyB,CAAC,CAAC;IAC3D,IAAI,SAAS,EAAE,CAAC;QACd,MAAM,CAAC,EAAE,MAAM,EAAE,OAAO,CAAC,GAAG,SAAS,CAAC;QACtC,MAAM,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;QAC7B,IAAI,OAAO,KAAK,SAAS;YAAE,OAAO,QAAQ,CAAC;QAC3C,MAAM,IAAI,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC;QACnC,QAAQ,IAAI,EAAE,CAAC;YACb,KAAK,GAAG;gBACN,OAAO,KAAK,CAAC;YACf,KAAK,GAAG;gBACN,OAAO,KAAK,GAAG,EAAE,CAAC;YACpB,KAAK,GAAG;gBACN,OAAO,KAAK,GAAG,EAAE,GAAG,EAAE,CAAC;YACzB,KAAK,GAAG;gBACN,OAAO,KAAK,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;YAC9B,KAAK,GAAG;gBACN,OAAO,KAAK,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;QACpC,CAAC;IACH,CAAC;IAED,2EAA2E;IAC3E,IAAI,oBAAoB,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;QACvC,IAAI,CAAC;YACH,4DAA4D;YAC5D,uCAAuC;YACvC,MAAM,MAAM,GAAG,QAAQ,CAAC,WAAW,OAAO,GAAG,CAAC,EAAE,CAAC;YACjD,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC;gBACvD,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QAC9B,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC;YACX,0BAA0B;QAC5B,CAAC;IACH,CAAC;IAED,OAAO,QAAQ,CAAC;AAClB,CAAC","debug_id":"42d35097-03a5-5fb8-b9e6-6234af055b72"}
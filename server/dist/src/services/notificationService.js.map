{"version":3,"file":"notificationService.js","sources":["src/services/notificationService.ts"],"sourceRoot":"/","sourcesContent":["import {\n  createNotification,\n  updateNotificationUrl,\n  findTopicSubscription,\n  createTopicSubscription,\n  deleteTopicSubscription,\n} from \"../models/notificationModel.js\";\n\nexport class NotificationService {\n  // Create a notification and update its URL\n  static async createAndLinkNotification(data: any): Promise<any> {\n    const notification = await createNotification({\n      ...data,\n      pushedAt: new Date(),\n      pushAttempts: 1,\n    });\n    // Generate URL with notificationId\n    const urlWithId = `${notification.url ? notification.url : \"/admins\"}${\n      notification.url?.includes(\"?\") ? \"&\" : \"?\"\n    }notificationId=${notification.id}`;\n    return await updateNotificationUrl(notification.id, urlWithId);\n  }\n\n  // Create a notification only\n  static async createNotification(data: any): Promise<any> {\n    return await createNotification({\n      ...data,\n      pushedAt: new Date(),\n      pushAttempts: 1,\n    });\n  }\n\n  // Find topic subscription\n  static async findTopicSubscription(userId: string, topic: string) {\n    return await findTopicSubscription(userId, topic);\n  }\n\n  // Create topic subscription\n  static async createTopicSubscription(userId: string, topic: string) {\n    return await createTopicSubscription(userId, topic);\n  }\n\n  // Delete topic subscription\n  static async deleteTopicSubscription(userId: string, topic: string) {\n    return await deleteTopicSubscription(userId, topic);\n  }\n}\n\nexport default NotificationService;\n"],"names":[],"mappings":";;AAAA,OAAO,EACL,kBAAkB,EAClB,qBAAqB,EACrB,qBAAqB,EACrB,uBAAuB,EACvB,uBAAuB,GACxB,MAAM,gCAAgC,CAAC;AAExC,MAAM,OAAO,mBAAmB;IAC9B,2CAA2C;IAC3C,MAAM,CAAC,KAAK,CAAC,yBAAyB,CAAC,IAAS;QAC9C,MAAM,YAAY,GAAG,MAAM,kBAAkB,CAAC;YAC5C,GAAG,IAAI;YACP,QAAQ,EAAE,IAAI,IAAI,EAAE;YACpB,YAAY,EAAE,CAAC;SAChB,CAAC,CAAC;QACH,mCAAmC;QACnC,MAAM,SAAS,GAAG,GAAG,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,SAAS,GAClE,YAAY,CAAC,GAAG,EAAE,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAC1C,kBAAkB,YAAY,CAAC,EAAE,EAAE,CAAC;QACpC,OAAO,MAAM,qBAAqB,CAAC,YAAY,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC;IACjE,CAAC;IAED,6BAA6B;IAC7B,MAAM,CAAC,KAAK,CAAC,kBAAkB,CAAC,IAAS;QACvC,OAAO,MAAM,kBAAkB,CAAC;YAC9B,GAAG,IAAI;YACP,QAAQ,EAAE,IAAI,IAAI,EAAE;YACpB,YAAY,EAAE,CAAC;SAChB,CAAC,CAAC;IACL,CAAC;IAED,0BAA0B;IAC1B,MAAM,CAAC,KAAK,CAAC,qBAAqB,CAAC,MAAc,EAAE,KAAa;QAC9D,OAAO,MAAM,qBAAqB,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IACpD,CAAC;IAED,4BAA4B;IAC5B,MAAM,CAAC,KAAK,CAAC,uBAAuB,CAAC,MAAc,EAAE,KAAa;QAChE,OAAO,MAAM,uBAAuB,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IACtD,CAAC;IAED,4BAA4B;IAC5B,MAAM,CAAC,KAAK,CAAC,uBAAuB,CAAC,MAAc,EAAE,KAAa;QAChE,OAAO,MAAM,uBAAuB,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;IACtD,CAAC;CACF;AAED,eAAe,mBAAmB,CAAC","debug_id":"e851c307-dff6-5ec3-afba-bce4f54c6c57"}
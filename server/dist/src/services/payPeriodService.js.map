{"version":3,"file":"payPeriodService.js","sourceRoot":"/","sources":["src/services/payPeriodService.ts"],"names":[],"mappings":"AAAA,0CAA0C;AAC1C,OAAO,MAAM,MAAM,kBAAkB,CAAC;AAEtC,gEAAgE;AAChE,MAAM,UAAU,uBAAuB;IACrC,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,iBAAiB;IACzD,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;IACvB,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAC1B,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,SAAS,CAAC,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CACtE,CAAC,CAAC,qBAAqB;IACxB,OAAO,IAAI,IAAI,CACb,SAAS,CAAC,OAAO,EAAE,GAAG,SAAS,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAC9D,CAAC;AACJ,CAAC;AAED,MAAM,CAAC,KAAK,UAAU,kBAAkB,CAAC,MAAc;IACrD,MAAM,cAAc,GAAG,uBAAuB,EAAE,CAAC;IACjD,MAAM,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC;IAC/B,OAAO,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC;QAC/B,KAAK,EAAE;YACL,MAAM;YACN,SAAS,EAAE;gBACT,GAAG,EAAE,cAAc;gBACnB,GAAG,EAAE,WAAW;aACjB;YACD,OAAO,EAAE;gBACP,GAAG,EAAE,IAAI;aACV;SACF;QACD,MAAM,EAAE;YACN,EAAE,EAAE,IAAI;YACR,SAAS,EAAE,IAAI;YACf,OAAO,EAAE,IAAI;SACd;KACF,CAAC,CAAC;AACL,CAAC","sourcesContent":["// server/src/services/payPeriodService.ts\nimport prisma from \"../lib/prisma.js\";\n\n// Utility to calculate the start date of the current pay period\nexport function calculatePayPeriodStart(): Date {\n  const startDate = new Date(2024, 7, 5); // August 5, 2024\n  const now = new Date();\n  const diffWeeks = Math.floor(\n    (now.getTime() - startDate.getTime()) / (2 * 7 * 24 * 60 * 60 * 1000)\n  ); // Two-week intervals\n  return new Date(\n    startDate.getTime() + diffWeeks * 2 * 7 * 24 * 60 * 60 * 1000\n  );\n}\n\nexport async function getPayPeriodSheets(userId: string) {\n  const payPeriodStart = calculatePayPeriodStart();\n  const currentDate = new Date();\n  return prisma.timeSheet.findMany({\n    where: {\n      userId,\n      startTime: {\n        gte: payPeriodStart,\n        lte: currentDate,\n      },\n      endTime: {\n        not: null,\n      },\n    },\n    select: {\n      id: true,\n      startTime: true,\n      endTime: true,\n    },\n  });\n}\n"]}
{"version":3,"file":"requireFirebaseEnv.js","sourceRoot":"/","sources":["src/middleware/requireFirebaseEnv.ts"],"names":[],"mappings":"AAEA,MAAM,UAAU,kBAAkB,CAChC,GAAY,EACZ,GAAa,EACb,IAAkB;IAElB,MAAM,eAAe,GAAG;QACtB,kCAAkC;QAClC,oCAAoC;QACpC,mCAAmC;KACpC,CAAC;IACF,MAAM,WAAW,GAAG,eAAe,CAAC,MAAM,CACxC,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CACnC,CAAC;IACF,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QAC3B,OAAO,CAAC,IAAI,CACV,mEAAmE,EACnE,WAAW,CACZ,CAAC;QACF,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YAC1B,OAAO,EAAE,KAAK;YACd,KAAK,EAAE,8CAA8C;YACrD,OAAO,EAAE,kCAAkC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;SACpE,CAAC,CAAC;IACL,CAAC;IACD,IAAI,EAAE,CAAC;AACT,CAAC","sourcesContent":["import type { Request, Response, NextFunction } from \"express\";\n\nexport function requireFirebaseEnv(\n  req: Request,\n  res: Response,\n  next: NextFunction\n) {\n  const requiredEnvVars = [\n    \"FIREBASE_SERVICE_JSON_PROJECT_ID\",\n    \"FIREBASE_SERVICE_JSON_CLIENT_EMAIL\",\n    \"FIREBASE_SERVICE_JSON_PRIVATE_KEY\",\n  ];\n  const missingVars = requiredEnvVars.filter(\n    (varName) => !process.env[varName]\n  );\n  if (missingVars.length > 0) {\n    console.warn(\n      \"[send-notification] ⚠️ Firebase not configured properly. Missing:\",\n      missingVars\n    );\n    return res.status(200).json({\n      success: false,\n      error: \"Firebase notification service not configured\",\n      details: `Missing environment variables: ${missingVars.join(\", \")}`,\n    });\n  }\n  next();\n}\n"]}
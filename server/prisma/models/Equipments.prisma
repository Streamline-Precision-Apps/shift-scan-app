model Equipment {
  id                     String                 @id @default(uuid())
  qrId                   String                 @unique
  name                   String
  description            String?
  creationReason         String?
  equipmentTag           EquipmentTags          @default(EQUIPMENT)
  state                  EquipmentState         @default(AVAILABLE)
  approvalStatus         ApprovalStatus         @default(PENDING)
  createdAt              DateTime               @default(now())
  updatedAt              DateTime               @updatedAt
  overWeight             Boolean?               @default(false)
  currentWeight          Float?                 @default(0)
  createdById            String?
  createdVia             CreatedVia             @default(MOBILE)
  acquiredDate           DateTime?
  code                   String?
  color                  String?
  licensePlate           String?
  licenseState           String?
  make                   String?
  memo                   String?
  model                  String?
  ownershipType          OwnershipType?
  registrationExpiration DateTime?
  serialNumber           String?
  year                   String?
  acquiredCondition      Condition?
  status                 FormTemplateStatus     @default(ACTIVE)
  EmployeeEquipmentLogs  EmployeeEquipmentLog[]
  createdBy              User?                  @relation(fields: [createdById], references: [id])
  EquipmentHauled        EquipmentHauled[]
  Maintenances           Maintenance[]
  TascoLogs              TascoLog[]
  HauledInLogs           TruckingLog[]          @relation("HauledEquipment")
  UsedAsTrailer          TruckingLog[]          @relation("TrailerEquipment")
  UsedAsTruck            TruckingLog[]          @relation("TruckEquipment")
  Maintenance            mechanicProjects[]
  DocumentTags           DocumentTag[]          @relation("DocumentTagToEquipment")

  @@index([qrId])
  @@index([status])
  @@index([approvalStatus])
}

model EmployeeEquipmentLog {
  id            String       @id @default(uuid())
  equipmentId   String?
  maintenanceId String?
  startTime     DateTime     @default(now())
  endTime       DateTime?
  comment       String?
  timeSheetId   Int
  rental        Boolean      @default(false)
  Equipment     Equipment?   @relation(fields: [equipmentId], references: [id])
  Maintenance   Maintenance? @relation(fields: [maintenanceId], references: [id], onDelete: Cascade)
  TimeSheet     TimeSheet    @relation(fields: [timeSheetId], references: [id], onDelete: Cascade)
  RefuelLog     RefuelLog?

  @@index([timeSheetId, equipmentId, maintenanceId])
}

enum Condition {
  NEW
  USED
}

enum EquipmentState {
  AVAILABLE
  IN_USE
  MAINTENANCE
  NEEDS_REPAIR
  RETIRED
}

enum EquipmentTags {
  TRUCK
  TRAILER
  VEHICLE
  EQUIPMENT
}

enum OwnershipType {
  OWNED
  LEASED
  RENTAL
}
